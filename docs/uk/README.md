# @nan0web/db

|[–°—Ç–∞—Ç—É—Å](https://github.com/nan0web/monorepo/blob/main/system.md#–Ω–∞–ø–∏—Å–∞–Ω–Ω—è-—Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤)|–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è|–ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏|–§—É–Ω–∫—Ü—ñ—ó|–í–µ—Ä—Å—ñ—è Npm|
|---|---|---|---|---|
 |üü¢ `98.4%` |üß™ [–ê–Ω–≥–ª—ñ–π—Å—å–∫–æ—é üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø](https://github.com/nan0web/db/blob/main/README.md)<br />[–£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é üá∫üá¶](https://github.com/nan0web/db/blob/main/docs/uk/README.md) |üü¢ `91.8%` |‚úÖ d.ts üìú system.md üïπÔ∏è playground |‚Äî |

–ê–≥–Ω–æ—Å—Ç–∏—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—ó –¥–∞–Ω–∏–º–∏. –†–æ–∑—Ä–æ–±–ª–µ–Ω–∞ —è–∫
–≥–Ω—É—á–∫–∏–π, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —ñ –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î –±—É–¥—å-—è–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö —Ç–∞
–≤–∫–ª–∞–¥–µ–Ω—É —ñ—î—Ä–∞—Ä—Ö—ñ—é –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ—Å–∏–ª–∞–Ω—å, –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö.

–ù–∞—Ç—Ö–Ω–µ–Ω–Ω–∞ –ø—Ä–∞–≤–∏–ª–æ–º `zero-is-not-a-number` –∑ nan0web:
> –ö–æ–∂–Ω—ñ –¥–∞–Ω—ñ —Å—Ç–∞—é—Ç—å –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, –ø—ñ–¥—Ç—Ä–∏–º—É—î:
- —Å–ø–ª—é—â—É–≤–∞–Ω–Ω—è/—Ä–æ–∑–ø–ª—é—â—É–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤
- –≥–ª–∏–±–æ–∫–µ –∑–ª–∏—Ç—Ç—è –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ—Å–∏–ª–∞–Ω—å
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ —Å–ø–∏—Å–∫—É–≤–∞–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ (–¥–ª—è fs & fetch —à–∞—Ä—ñ–≤)
- –ø—Ä–æ–≥—Ä–µ—Å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ–∫—É –ø—ñ–¥ —á–∞—Å –æ–±—Ö–æ–¥—É

–î–∏–≤–∏—Å—å —è–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –≤ [–ø–µ—Å–æ—á–Ω–∏—Ü—ñ](#–ø–µ—Å–æ—á–Ω–∏—Ü—è).

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é npm?
```bash
npm install @nan0web/db
```

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é pnpm?
```bash
pnpm add @nan0web/db
```

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é yarn?
```bash
yarn add @nan0web/db
```

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

–Ø–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ JSON-–¥–æ–∫—É–º–µ–Ω—Ç?
```js
import DB from "@nan0web/db"
const db = new DB()
const doc = await db.loadDocumentAs(".json", "doc", { key: "value" })
console.info(doc) // ‚Üê { key: "value" }
```
### –ü—Ä–∏–∫–ª–∞–¥: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `get()` –∑ –∑–Ω–∞—á–µ–Ω–Ω—è–º –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–±–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º?
```js
import DB from "@nan0web/db"
const db = new DB()
const result = await db.get("missing-file.json", { defaultValue: {} })
console.info(result) // ‚Üê {}
```
### –ü—Ä–∏–∫–ª–∞–¥: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç—É

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç?
```js
import DB from "@nan0web/db"
const db = new DB({ data: new Map([["file.txt", "text"]]) })
const result = await db.get("file.txt")
console.info(result) // ‚Üê "text"
```
## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### –û–±—Ä–æ–±–∫–∞ –ø–æ—Å–∏–ª–∞–Ω—å —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö

–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ø–æ—Å–∏–ª–∞–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤?
```js
import DB from "@nan0web/db"
const db = new DB({
	data: new Map([
		["_/index.json", { global: "value" }],
		["data.json", { "$ref": "_/index.json", key: "val" }]
	])
})
const res = await db.fetch("data.json")
console.info(res) // ‚Üê { global: "value", key: "val" }
```
## –ü–µ—Å–æ—á–Ω–∏—Ü—è

CLI-–ø–µ—Å–æ—á–Ω–∏—Ü—è –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤:
```bash
git clone https://github.com/nan0web/db.git
cd db
npm install
npm run playground
```

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è API

–û—Å–Ω–æ–≤–æ—é –ø–∞–∫–µ—Ç—É —î –±–∞–∑–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–∏—Ö.

### `db.get(uri, GetOpts)`
–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î/–ø–æ–≤–µ—Ä—Ç–∞—î –≤–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É –∑ –π–æ–≥–æ URI.

* **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  * `uri` *(string)* ‚Äì URI –¥–æ–∫—É–º–µ–Ω—Ç—É.
  * `GetOpts.defaultValue` *(any)* ‚Äì –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —è–∫—â–æ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.

* **–ü–æ–≤–µ—Ä—Ç–∞—î**
  * *(any)* ‚Äì –í–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É –∞–±–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—É?
```js
import DB from "@nan0web/db"
const db = new DB({ data: new Map([["x.file", "hello"]]) })
const result = await db.get("x.file")
console.info(result) // ‚Üê "hello"
```
### `db.fetch(uri, FetchOptions)`
–Ø–∫ get, –∞–ª–µ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏: –æ–±—Ä–æ–±–∫–∞ –ø–æ—Å–∏–ª–∞–Ω—å, –∑–º—ñ–Ω–Ω–∏—Ö, –ø—Ä–∞–≤–∏–ª –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è.

–ü—ñ–¥—Ç—Ä–∏–º—É—î –ø–æ—à—É–∫ —Ä–æ–∑—à–∏—Ä–µ–Ω—å, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–Ω–∞—Ö–æ–¥–∏—Ç—å `.json`, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–æ–Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω–µ.

–Ø–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –¥–∞–Ω—ñ?
```js
import DB from "@nan0web/db"
const db = new DB({ data: new Map([["file.json", { value: "loaded" }]]) })
const result = await db.fetch("file")
console.info(result) // ‚Üê { value: "loaded" }
```
### `db.set(uri, data)`
–ó–±–µ—Ä—ñ–≥–∞—î –≤–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É —ñ –≤—ñ–¥–º—ñ—á–∞—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö.

–Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤–∏–π –≤–º—ñ—Å—Ç?
```js
import DB from "@nan0web/db"
const db = new DB()
const res = await db.set("file.text", "save me!")
console.info(res) // ‚Üê "save me!"
console.info(db.data.get("file.text")) // ‚Üê "save me!"
```
### `db.push(uri?)`
–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑–º—ñ–Ω–∏ –≤ –ø–∞–º'—è—Ç—ñ –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∞–±–æ —Å–ª—É–∂–±–∞–º–∏.

–Ø–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑—ñ —Å—Ö–æ–≤–∏—â–µ–º?
```js
import DB from "@nan0web/db"
const db = new DB()
await db.set("./app.json", { version: "1.0" })
const changed = await db.push()
console.info(changed) // ‚Üê ["./app.json"]
```
### `Data.flatten(data)`
–ó–≥–ª–∞–¥–∂—É—î –≤–∫–ª–∞–¥–µ–Ω–∏–π –æ–±'—î–∫—Ç –¥–æ —à–ª—è—Ö—ñ–≤ —è–∫ –∫–ª—é—á—ñ–≤.

–Ø–∫ –∑–≥–ª–∞–¥–∏—Ç–∏ –æ–±'—î–∫—Ç?
```js
import { Data } from "@nan0web/db"
const flat = Data.flatten({ x: { a: [1, 2, { b: 3 }] }})
console.info(flat) // ‚Üê { 'x/a/[0]': 1, 'x/a/[1]': 2, 'x/a/[2]/b': 3 }
```
### `Data.unflatten(data)`
–í—ñ–¥–Ω–æ–≤–ª—é—î –≤–∫–ª–∞–¥–µ–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑ –ø–ª–æ—Å–∫–∏—Ö –∫–ª—é—á—ñ–≤.

–Ø–∫ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö?
```js
import { Data } from "@nan0web/db"
const nested = Data.unflatten({
	"x/y/z": 7,
	"arr/[0]/title": "–ø–µ—Ä—à–∏–π",
	"arr/[1]/title": "–¥—Ä—É–≥–∏–π"
})
console.info(nested) // ‚Üê { x: { y: { z: 7 } }, arr: [ { title: '–ø–µ—Ä—à–∏–π' }, { title: '–¥—Ä—É–≥–∏–π' } ] }
```
### `Data.merge(a, b)`
–ì–ª–∏–±–æ–∫–µ –∑–ª–∏—Ç—Ç—è –¥–≤–æ—Ö –æ–±'—î–∫—Ç—ñ–≤, –æ–±—Ä–æ–±–ª—è—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –º–∞—Å–∏–≤—ñ–≤ —à–ª—è—Ö–æ–º –∑–∞–º—ñ–Ω–∏.

–Ø–∫ –∑–ª–∏–≤–∞—Ç–∏ –æ–±‚Äô—î–∫—Ç–∏ –≥–ª–∏–±–æ–∫–æ?
```js
import { Data } from "@nan0web/db"
const a = { x: { one: 1 }, arr: [0] }
const b = { y: "two", x: { two: 2 }, arr: [1] }
const merged = Data.merge(a, b)
console.info(merged) // ‚Üê { x: { one: 1, two: 2 }, y: 'two', arr: [ 1 ] }
```
## –¢–∏–ø–∏ Java‚Ä¢Script —Ç–∞ –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
–ü–∞–∫–µ—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–æ –∑ jsdoc —ñ d.ts.

–°–∫—ñ–ª—å–∫–∏ —Ñ–∞–π–ª—ñ–≤ d.ts –º–∞—î –ø–æ–∫—Ä–∏–≤–∞—Ç–∏ –¥–∂–µ—Ä–µ–ª–æ?

## –î–æ–ø–æ–º–æ–≥–∞ —É —Ä–æ–∑–≤–∏—Ç–∫—É

–Ø–∫ –±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—å? ‚Äì [–¥–∏–≤. CONTRIBUTING.md](https://github.com/nan0web/db/blob/main/CONTRIBUTING.md)

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC License ‚Äì [–¥–∏–≤. –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç](https://github.com/nan0web/db/blob/main/LICENSE)
