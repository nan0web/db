# @nan0web/db

| [–°—Ç–∞—Ç—É—Å](https://github.com/nan0web/monorepo/blob/main/system.md#–Ω–∞–ø–∏—Å–∞–Ω–Ω—è-—Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤) | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è                                                                                                                                        | –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏ | –§—É–Ω–∫—Ü—ñ—ó                            | –í–µ—Ä—Å—ñ—è Npm |
| ------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- | ---------------------------------- | ---------- |
| üü¢ `99.2%`                                                                            | üß™ [English üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø](https://github.com/nan0web/db/blob/main/README.md)<br />[–£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é üá∫üá¶](https://github.com/nan0web/db/blob/main/docs/uk/README.md) | üü¢ `96.3%`       | ‚úÖ d.ts üìú system.md üïπÔ∏è playground | 1.1.1      |

–ê–≥–Ω–æ—Å—Ç–∏—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—ó –¥–∞–Ω–∏–º–∏. –†–æ–∑—Ä–æ–±–ª–µ–Ω–∞ —è–∫
–≥–Ω—É—á–∫–∏–π, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —ñ –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î –±—É–¥—å-—è–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö —Ç–∞
–≤–∫–ª–∞–¥–µ–Ω—É —ñ—î—Ä–∞—Ä—Ö—ñ—é –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ—Å–∏–ª–∞–Ω—å, –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö.

–ù–∞—Ç—Ö–Ω–µ–Ω–Ω–∞ –ø—Ä–∞–≤–∏–ª–æ–º `zero-is-not-a-number` –∑ nan0web:

> –ö–æ–∂–Ω—ñ –¥–∞–Ω—ñ —Å—Ç–∞—é—Ç—å –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, –ø—ñ–¥—Ç—Ä–∏–º—É—î:

- —Å–ø–ª—é—â—É–≤–∞–Ω–Ω—è/—Ä–æ–∑–ø–ª—é—â—É–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤
- –≥–ª–∏–±–æ–∫–µ –∑–ª–∏—Ç—Ç—è –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ—Å–∏–ª–∞–Ω—å
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ —Å–ø–∏—Å–∫—É–≤–∞–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ (–¥–ª—è fs & fetch —à–∞—Ä—ñ–≤)
- –ø—Ä–æ–≥—Ä–µ—Å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ–∫—É –ø—ñ–¥ —á–∞—Å –æ–±—Ö–æ–¥—É

–î–∏–≤–∏—Å—å —è–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –≤ [–ø—ñ—Å–æ—á–Ω–∏—Ü—ñ](#–ø—ñ—Å–æ—á–Ω–∏—Ü—è).

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é npm?

```bash
npm install @nan0web/db
```

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é pnpm?

```bash
pnpm add @nan0web/db
```

–Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é yarn?

```bash
yarn add @nan0web/db
```

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

–Ø–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ JSON-–¥–æ–∫—É–º–µ–Ω—Ç?

```js
import DB from '@nan0web/db'
const db = new DB()
const doc = await db.loadDocumentAs('.json', 'doc', { key: 'value' })
console.info(doc) // ‚Üê { key: "value" }
```

### –ü—Ä–∏–∫–ª–∞–¥: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `get()` –∑ –∑–Ω–∞—á–µ–Ω–Ω—è–º –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–±–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º?

```js
import DB from '@nan0web/db'
const db = new DB()
const result = await db.get('missing-file.json', { defaultValue: {} })
console.info(result) // ‚Üê {}
```

### –ü—Ä–∏–∫–ª–∞–¥: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç—É

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç?

```js
import DB from '@nan0web/db'
const db = new DB({ data: new Map([['file.txt', 'text']]) })
const result = await db.get('file.txt')
console.info(result) // ‚Üê "text"
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### –û–±—Ä–æ–±–∫–∞ –ø–æ—Å–∏–ª–∞–Ω—å —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö

–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ø–æ—Å–∏–ª–∞–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤?

```js
import DB from '@nan0web/db'
const db = new DB({
  data: new Map([
    ['_/index.json', { global: 'value' }],
    ['data.json', { $ref: '_/index.json', key: 'val' }],
  ]),
})
const res = await db.fetch('data.json')
console.info(res) // ‚Üê { global: "value", key: "val" }
```

## –ü—ñ—Å–æ—á–Ω–∏—Ü—è

CLI-–ø—ñ—Å–æ—á–Ω–∏—Ü—è –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤:

```bash
git clone https://github.com/nan0web/db.git
cd db
npm install
npm run play
```

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è API

–û—Å–Ω–æ–≤–æ—é –ø–∞–∫–µ—Ç—É —î –±–∞–∑–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–∏—Ö.

### `db.get(uri, GetOpts)`

–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î/–ø–æ–≤–µ—Ä—Ç–∞—î –≤–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É –∑ –π–æ–≥–æ URI.

- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  - `uri` _(string)_ ‚Äì URI –¥–æ–∫—É–º–µ–Ω—Ç—É.
  - `GetOpts.defaultValue` _(any)_ ‚Äì –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —è–∫—â–æ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.

- **–ü–æ–≤–µ—Ä—Ç–∞—î**
  - _(any)_ ‚Äì –í–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É –∞–±–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—É?

```js
import DB from '@nan0web/db'
const db = new DB({ data: new Map([['x.file', 'hello']]) })
const result = await db.get('x.file')
console.info(result) // ‚Üê "hello"
```

### `db.fetch(uri, FetchOptions)`

–Ø–∫ get, –∞–ª–µ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏: –æ–±—Ä–æ–±–∫–∞ –ø–æ—Å–∏–ª–∞–Ω—å, –∑–º—ñ–Ω–Ω–∏—Ö, –ø—Ä–∞–≤–∏–ª –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è.

–ü—ñ–¥—Ç—Ä–∏–º—É—î –ø–æ—à—É–∫ —Ä–æ–∑—à–∏—Ä–µ–Ω—å, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–Ω–∞—Ö–æ–¥–∏—Ç—å `.json`, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–æ–Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω–µ.

–Ø–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –¥–∞–Ω—ñ?

```js
import DB from '@nan0web/db'
const db = new DB({ data: new Map([['file.json', { value: 'loaded' }]]) })
const result = await db.fetch('file')
console.info(result) // ‚Üê { value: "loaded" }
```

### `db.set(uri, data)`

–ó–±–µ—Ä—ñ–≥–∞—î –≤–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É —ñ –≤—ñ–¥–º—ñ—á–∞—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö.

–Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤–∏–π –≤–º—ñ—Å—Ç?

```js
import DB from '@nan0web/db'
const db = new DB()
const res = await db.set('file.text', 'save me!')
console.info(res) // ‚Üê "save me!"
console.info(db.data.get('file.text')) // ‚Üê "save me!"
```

### `db.push(uri?)`

–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑–º—ñ–Ω–∏ –≤ –ø–∞–º'—è—Ç—ñ –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∞–±–æ —Å–ª—É–∂–±–∞–º–∏.

–Ø–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑—ñ —Å—Ö–æ–≤–∏—â–µ–º?

```js
import DB from '@nan0web/db'
const db = new DB()
await db.set('./app.json', { version: '1.0' })
const changed = await db.push()
console.info(changed) // ‚Üê ["./app.json"]
```

### `Data.flatten(data)`

–ó–≥–ª–∞–¥–∂—É—î –≤–∫–ª–∞–¥–µ–Ω–∏–π –æ–±'—î–∫—Ç –¥–æ —à–ª—è—Ö—ñ–≤ —è–∫ –∫–ª—é—á—ñ–≤.

–Ø–∫ –∑–≥–ª–∞–¥–∏—Ç–∏ –æ–±'—î–∫—Ç?

```js
import { Data } from '@nan0web/db'
const flat = Data.flatten({ x: { a: [1, 2, { b: 3 }] } })
console.info(flat) // ‚Üê { 'x/a/[0]': 1, 'x/a/[1]': 2, 'x/a/[2]/b': 3 }
```

### `Data.unflatten(data)`

–í—ñ–¥–Ω–æ–≤–ª—é—î –≤–∫–ª–∞–¥–µ–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑ –ø–ª–æ—Å–∫–∏—Ö –∫–ª—é—á—ñ–≤.

–Ø–∫ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö?

```js
import { Data } from '@nan0web/db'
const nested = Data.unflatten({
  'x/y/z': 7,
  'arr/[0]/title': '–ø–µ—Ä—à–∏–π',
  'arr/[1]/title': '–¥—Ä—É–≥–∏–π',
})
console.info(nested) // ‚Üê { x: { y: { z: 7 } }, arr: [ { title: '–ø–µ—Ä—à–∏–π' }, { title: '–¥—Ä—É–≥–∏–π' } ] }
```

### `Data.merge(a, b)`

–ì–ª–∏–±–æ–∫–µ –∑–ª–∏—Ç—Ç—è –¥–≤–æ—Ö –æ–±'—î–∫—Ç—ñ–≤, –æ–±—Ä–æ–±–ª—è—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –º–∞—Å–∏–≤—ñ–≤ —à–ª—è—Ö–æ–º –∑–∞–º—ñ–Ω–∏.

–Ø–∫ –∑–ª–∏–≤–∞—Ç–∏ –æ–±‚Äô—î–∫—Ç–∏ –≥–ª–∏–±–æ–∫–æ?

```js
import { Data } from '@nan0web/db'
const a = { x: { one: 1 }, arr: [0] }
const b = { y: 'two', x: { two: 2 }, arr: [1] }
const merged = Data.merge(a, b)
console.info(merged) // ‚Üê { x: { one: 1, two: 2 }, y: 'two', arr: [ 1 ] }
```

## –®–ª—è—Ö–æ–≤—ñ —É—Ç–∏–ª—ñ—Ç–∏

`@nan0web/db/path` –Ω–∞–¥–∞—î —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∏—Ä—ñ—à–µ–Ω–Ω—è URI/—à–ª—è—Ö—ñ–≤ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.
–ü—ñ–¥—Ç—Ä–∏–º—É—î –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—é, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è basename/dirname —Ç–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –∞–±—Å–æ–ª—é—Ç–Ω–∏—Ö/–≤—ñ–¥–Ω–æ—Å–Ω–∏—Ö —à–ª—è—Ö—ñ–≤.

### –Ü–º–ø–æ—Ä—Ç —à–ª—è—Ö–æ–≤–∏—Ö —É—Ç–∏–ª—ñ—Ç

–Ø–∫ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —à–ª—è—Ö–æ–≤—ñ —É—Ç–∏–ª—ñ—Ç–∏?

```js
import { normalize, basename, dirname, absolute, resolveSync } from '@nan0web/db/path'
console.info(normalize('a/b/../c')) // ‚Üê a/c
console.info(basename('path/to/file.txt')) // ‚Üê file.txt
console.info(dirname('path/to/file.txt')) // ‚Üê path/to/
console.info(absolute('/base', 'root', 'file')) // ‚Üê /base/root/file
console.info(resolveSync('/base', '.', 'file.txt')) // ‚Üê file.txt
```

### `normalize(...segments)`

–ù–æ—Ä–º–∞–ª—ñ–∑—É—î —Å–µ–≥–º–µ–Ω—Ç–∏ —à–ª—è—Ö—É, –æ–±—Ä–æ–±–ª—è—î `../`, `./` —Ç–∞ –¥—É–±–ª—å–æ–≤–∞–Ω—ñ —Å–ª–µ—à—ñ.

–Ø–∫ –Ω–æ—Ä–º–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–µ–≥–º–µ–Ω—Ç–∏ —à–ª—è—Ö—É?

```js
import { normalize } from '@nan0web/db/path'
console.info(normalize('a/b/../c')) // ‚Üê a/c
console.info(normalize('a//b///c')) // ‚Üê a/b/c
console.info(normalize('dir/sub/')) // ‚Üê dir/sub/
```

### `basename(uri, [suffix])`

–í–∏—Ç—è–≥—É—î –±–∞–∑–æ–≤–µ —ñ–º'—è, –ø—Ä–∏ –±–∞–∂–∞–Ω–Ω—ñ –≤–∏–¥–∞–ª—è—î —Å—É—Ñ—ñ–∫—Å –∞–±–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è.

–Ø–∫ –≤–∏—Ç—è–≥—Ç–∏ –±–∞–∑–æ–≤–µ —ñ–º'—è?

```js
import { basename } from '@nan0web/db/path'
console.info(basename('/dir/file.txt')) // ‚Üê file.txt
console.info(basename('/dir/file.txt', '.txt')) // ‚Üê file
console.info(basename('/dir/file.txt', true)) // ‚Üê file (–≤–∏–¥–∞–ª–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è)
console.info(basename('/dir/')) // ‚Üê dir/
```

### `dirname(uri)`

–í–∏—Ç—è–≥—É—î —à–ª—è—Ö –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥—É.

–Ø–∫ –≤–∏—Ç—è–≥—Ç–∏ —à–ª—è—Ö –∫–∞—Ç–∞–ª–æ–≥—É?

```js
import { dirname } from '@nan0web/db/path'
console.info(dirname('/a/b/file')) // ‚Üê /a/b/
console.info(dirname('/a/b/')) // ‚Üê /a/
console.info(dirname('/file')) // ‚Üê /
console.info(dirname('file.txt')) // ‚Üê .
```

### `extname(uri)`

–í–∏—Ç—è–≥—É—î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—É –∑ –∫—Ä–∞–ø–∫–æ—é (—É –Ω–∏–∂–Ω—å–æ–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ).

–Ø–∫ –≤–∏—Ç—è–≥—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è?

```js
import { extname } from '@nan0web/db/path'
console.info(extname('file.TXT')) // ‚Üê .txt
console.info(extname('archive.tar.gz')) // ‚Üê .gz
console.info(extname('noext')) // ‚Üê ''
console.info(extname('/dir/')) // ‚Üê ''
```

### `resolveSync(cwd, root, ...segments)`

–í–∏—Ä—ñ—à—É—î —Å–µ–≥–º–µ–Ω—Ç–∏ –≤—ñ–¥–Ω–æ—Å–Ω–æ cwd/root (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ).

–Ø–∫ –≤–∏—Ä—ñ—à–∏—Ç–∏ —à–ª—è—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ?

```js
import { resolveSync } from '@nan0web/db/path'
console.info(resolveSync('/base', '.', 'a/b/../c')) // ‚Üê a/c
```

### `relative(from, to)`

–û–±—á–∏—Å–ª—é—î –≤—ñ–¥–Ω–æ—Å–Ω–∏–π —à–ª—è—Ö –≤—ñ–¥ `from` –¥–æ `to`.

–Ø–∫ –æ–±—á–∏—Å–ª–∏—Ç–∏ –≤—ñ–¥–Ω–æ—Å–Ω–∏–π —à–ª—è—Ö?

```js
import { relative } from '@nan0web/db/path'
console.info(relative('/a/b', '/a/c')) // ‚Üê c
console.info(relative('/root/dir', '/root/')) // ‚Üê dir
```

### `absolute(cwd, root, ...segments)`

–ë—É–¥—É—î –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —à–ª—è—Ö/URL –∑ cwd, root —Ç–∞ —Å–µ–≥–º–µ–Ω—Ç—ñ–≤.

–Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —à–ª—è—Ö?

```js
import { absolute } from '@nan0web/db/path'
console.info(absolute('/base', 'root', 'file')) // ‚Üê /base/root/file
console.info(absolute('https://ex.com', 'api', 'v1')) // ‚Üê https://ex.com/api/v1
```

### `isRemote(uri)` & `isAbsolute(uri)`

–ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ URI —î –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–º –∞–±–æ –∞–±—Å–æ–ª—é—Ç–Ω–∏–º.

–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∏–ø URI?

```js
import { isRemote, isAbsolute } from '@nan0web/db/path'
console.info(isRemote('https://ex.com')) // ‚Üê true
console.info(isAbsolute('/abs/path')) // ‚Üê true
console.info(isAbsolute('./rel')) // ‚Üê false
```

## –î—Ä–∞–π–≤–µ—Ä–∏ —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

–î—Ä–∞–π–≤–µ—Ä–∏ —Ä–æ–∑—à–∏—Ä—é—é—Ç—å DB –±–µ–∫–µ–Ω–¥–∞–º–∏ —Å—Ö–æ–≤–∏—â. –ù–∞—Å–ª—ñ–¥—É–π—Ç–µ `DBDriverProtocol` –¥–ª—è –≤–ª–∞—Å–Ω–æ—ó –ª–æ–≥—ñ–∫–∏.

### –ë–∞–∑–æ–≤–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥—Ä–∞–π–≤–µ—Ä–∞

–Ø–∫ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ DBDriverProtocol?

```js
import { DBDriverProtocol } from '@nan0web/db'
class MyDriver extends DBDriverProtocol {
  async read(uri) {
    // –í–ª–∞—Å–Ω–∞ –ª–æ–≥—ñ–∫–∞ —á–∏—Ç–∞–Ω–Ω—è
    return { data: '–∑ –≤–ª–∞—Å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞' }
  }
}
const driver = new MyDriver()
console.log(await driver.read('/—à–ª—è—Ö')) // ‚Üê { data: '–∑ –≤–ª–∞—Å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞' }
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥—Ä–∞–π–≤–µ—Ä–∞ –≤ DB

–Ø–∫ –ø—Ä–∏—î–¥–Ω–∞—Ç–∏ –¥—Ä–∞–π–≤–µ—Ä –¥–æ DB?

```js
import { DB, DBDriverProtocol } from '@nan0web/db'
class SimpleDriver extends DBDriverProtocol {
  async read(uri) {
    return `–ü—Ä–æ—á–∏—Ç–∞–Ω–æ: ${uri}`
  }
  async write(uri, data) {
    return true
  }
}
class ExtendedDB extends DB {
  constructor() {
    super({ driver: new SimpleDriver() })
    this.loadDocument = async (uri) => await this.driver.read(uri)
    this.saveDocument = async (uri, data) => await this.driver.write(uri, data)
  }
}
const db = new ExtendedDB()
await db.connect()
console.info(await db.get('/—Ç–µ—Å—Ç')) // ‚Üê –ü—Ä–æ—á–∏—Ç–∞–Ω–æ: —Ç–µ—Å—Ç
```

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `AuthContext` –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–ª–µ–π –ø—ñ–¥ —á–∞—Å –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ DB.

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è AuthContext

–Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ AuthContext?

```js
import { AuthContext } from '@nan0web/db'
const ctx = new AuthContext({ role: 'user', roles: ['user', 'guest'] })
console.info(ctx.hasRole('user')) // ‚Üê true
console.info(ctx.role) // ‚Üê user
```

### AuthContext –∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ DB

–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ AuthContext –≤ DB?

```js
import { DB, AuthContext } from '@nan0web/db'
const db = new DB()
const ctx = new AuthContext({ role: 'admin' })
await db.set('secure/file.txt', 'secret', ctx)
console.info(await db.get('secure/file.txt', {}, ctx)) // ‚Üê secret
```

### –û–±—Ä–æ–±–∫–∞ –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –¥–æ—Å—Ç—É–ø—É

–Ø–∫ –æ–±—Ä–æ–±–∏—Ç–∏ –≤—ñ–¥–º–æ–≤—É –≤ –¥–æ—Å—Ç—É–ø—ñ?

```js
import { AuthContext } from '@nan0web/db'
const ctx = new AuthContext()
ctx.fail(new Error('–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ'))
console.info(ctx.fails) // ‚Üê [Error: –î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ]
console.info(ctx.hasRole('admin')) // ‚Üê false
```

## –î–æ–ø–æ–º–æ–≥–∞ —É —Ä–æ–∑–≤–∏—Ç–∫—É

–Ø–∫ –±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—å? ‚Äì [–¥–∏–≤. CONTRIBUTING.md](https://github.com/nan0web/db/blob/main/CONTRIBUTING.md)

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC License ‚Äì [–¥–∏–≤. –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç](https://github.com/nan0web/db/blob/main/LICENSE)
